# {{ ansible_managed }}

# Do not log attempts for common files
location ~ ^/(favicon.ico|robots.txt) {
    access_log off;
    log_not_found off;
}

# Deny access to hidden files
location /. {
    access_log off;
    log_not_found off;
    return 404;
}

{% if nginx_drop_extensions %}
# Deny obviously bad requests
location ~ \.({% for ext in nginx_drop_extensions %}{{ ext }}{% if loop.last == false %}|{% endif %}{% endfor %})$ {
    return 410;
}
{% endif %}
